(()=>{"use strict";!function(e){let t=new Image;t.onload=t.onerror=function(){!function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)}(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}(),function(){const e=document.querySelector(".form__elem");e&&e.addEventListener("submit",(function(t){t.preventDefault(),e.querySelector(".form__btn");let o=e.querySelector(".form__error"),n=document.getElementById("failure"),s=e.elements;console.log(s);let i={};for(let e=0;e<s.length;e++){let t=s.item(e),n=t.name,c=String(t.value).trim();if("button"!=t.tagName.toLowerCase()){if(""==c)return o.classList.add("_active"),!1;o.classList.remove("_active"),i[n]=c}}console.log(i),async function(e="",t={}){let o=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(o.ok){let e=await o.json();return console.log(e),Promise.resolve(e)}alert("Ошибка HTTP: "+o.status+"Попробуйте еще раз позднее."),n.classList.add("opened")}("/wp-content/themes/kiiissme/payment.php",{obj:i}).then((e=>{console.log(e),localStorage.setItem("payment",JSON.stringify(e)),console.log("форма отправлена"),location.assign(e.confirmation_url)}))}))}(),function(){const e=document.querySelector(".control__toggle"),t=document.querySelector(".header__menu"),o=document.querySelector(".menu__close");e.addEventListener("click",(function(){t.classList.add("is-opened"),e.classList.add("is-active")})),o.addEventListener("click",(function(){t.classList.remove("is-opened"),e.classList.remove("is-active")}))}()})();